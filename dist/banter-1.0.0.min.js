/*! BanterJS by Adam Timberlake created on 2013-08-17 */
!function(a,b){a.banterApp=angular.module("banterApp",[]),banterApp.factory("$logger",["$rootScope",function(){var a={};return a.log=function(a){console.log("Banter.js @ "+moment().format("HH:mm:ss")+" - "+a)},a.error=function(a){console.error("Banter.js @ "+moment().format("HH:mm:ss")+" - "+a)},a}]),banterApp.factory("$webSocket",["$rootScope","$logger",function(a,b){var c={};return a.webSocket={},c.connect=function(c){var d;a.webSocket=d=new WebSocket(c),d.onopen=function(){b.log("Banter.js Connected, Sugar!"),d.send("Server: Client Connected at "+moment().format("HH:mm:ss")),a.$broadcast("connected")},d.onerror=function(){b.error("Client Threw an Error, Petal!")},d.onmessage=function(c){b.log("Message Received ("+c.data.length+" Characters), Sweetie..."),a.$broadcast("receivedMessage",c)}},a.$on("sendMessage",function(c,d){var e=JSON.stringify(d);b.log("Message Sent ("+e.length+" Characters), Cherry..."),a.webSocket.send(e)}),c}]),banterApp.controller("ApplicationController",["$scope","$webSocket","$logger",function(a,c,d){a.connected=!1,a.messages=[],a.message="",a.$on("bootstrap",function(a,b){d.log("Client Connecting: "+b),c.connect("ws://localhost:8080")}),a.$on("connected",function(){a.connected=!0,a.$apply()}),a.$on("receivedMessage",function(c,d){return"undefined"==typeof b?(console.error("Please install jQuery to continue using Banter.js."),!1):(a.messages.push($.parseJSON(d.data)),a.$apply(),!0)}),a.sendMessage=function(b){a.$emit("sendMessage",{name:"Wildhoney",message:b})}}]),banterApp.directive("banter",["$rootScope",function(a){return{restrict:"C",link:function(b){var c="undefined"!=typeof b.websocketServer?b.websocketServer:"ws://localhost:8080";a.$broadcast("bootstrap",c)}}}])}(window,jQuery);